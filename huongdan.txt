---
cai dat armbian orange pi pc
dung nmap -sP 192.168.1.1/24 de do tim orange pi pc tren LAN
ssh root@<ipv4>
pass:1234

---
sau do
create new pass for root
create new user:dungnt
create new pass for dungnt
thay doi cach bieu dien thong tin, chon no
tiep tuc chon 153 roi an enter
thoat exit
---
dang nhap bang ssh dungnt@<ipv4>
tao file start.sh, gan chmod 755 cho file va chay file voi sudo:

=================================start.sh====================================
#!/bin/bash
shopt -s dotglob
shopt -s nullglob

if [ $# -ne 1 ] ; then
        echo 'need 1 param'
        exit 1
fi

p1=$1
echo $p1

if [ ! -d /home/$p1 ] ; then
        echo 'directory not exists'
        exit 1
fi

cd /home/$p1
apt install git -y
#chu y thuong armbian da co san git roi
git clone https://github.com/dungbkhn/make_sftp_restrict_folder.git
cd /home/dungnt/make_sftp_restrict_folder
chmod 755 make_sftp_restrict_folder.sh
chmod 755 install_com.sh
./make_sftp_restrict_folder.sh
=============================================================================
sau do dang nhap lai bang dungnt
chay ko dung sudo
cd ~/make_sftp_restrict_folder
./install_com.sh

------
tao file setup_for_root_crontab.sh, thiet lap chmod 755 cho no
=====
#!/bin/bash
shopt -s dotglob
shopt -s nullglob

rm /home/dungnt/mount_ok.txt
rm /home/dungnt/mount_not_ok.txt

cd /home/dungnt/ChangeRemoteInfo
node server.js &

cd /home/dungnt

COUNTER=0

while true;
do
  rs=$(/sbin/fdisk -l | grep "/dev/sda")
  
  if [ "$rs" != "" ] ; then
    echo 'mount first time'
    mount /dev/sda1 /var/res/backup     
    chgrp -R dungnt /var/res/backup
    chown dungnt /var/res/backup
    chmod 755 /var/res/backup
    touch /home/dungnt/mount_ok.txt    
    break
  fi
  
  COUNTER=$(( COUNTER + 1 ))
  
  if [ $COUNTER -eq 3 ] ; then
    echo 'mount first time not ok'
    touch /home/dungnt/mount_not_ok.txt
    break
  fi
  
  sleep 3
done

=====
tao file setup_for_crontab.sh, thiet lap chmod 755 cho no
=====
#!/bin/bash
shopt -s dotglob
shopt -s nullglob

sleep 2

cd /home/dungnt/CreateRemoteLink
node server.js &
cd /home/dungnt/autotox
#./autotox &
chmod 777 reset_att.sh
./reset_att.sh &

cd /home/dungnt

while true;
do
  if [ -f /home/dungnt/mount_ok.txt ] ; then
    echo 'syncthing first time'
    syncthing &
    rm -f /home/dungnt/mount_ok.txt
    break
  fi
  
  if [ -f /home/dungnt/mount_not_ok.txt ] ; then
    echo 'syncthing first time not ok'
    rm -f /home/dungnt/mount_not_ok.txt
    break
  fi
  
  sleep 3
done


=====

thiep lap trong crontab
sudo crontab -e
roi them dong sau
@reboot /home/dungnt/setup_for_root_crontab.sh

-----

crontab -e
roi them dong sau
@reboot /home/dungnt/setup_for_crontab.sh

---
+neu usb chua chua du lieu sync:
cam usb vao, format bang mkfs.ext4 /dev/sda1
xoa thu muc lost+found trong usb vua format
khoi dong lai orange pi pc
+neu usb dang chua du lieu sync: cam usb vao roi khoi dong lai orange pi pc
---
tu add crontab bang: /var/spool/cron/crontabs
